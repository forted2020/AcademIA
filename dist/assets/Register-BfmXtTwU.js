import{r as o,j as e}from"./index-CQcJGhZo.js";import{C as i}from"./index.esm-miwwEqOb.js";import{a as S}from"./index-t--hEgTQ.js";import{C as P}from"./CContainer-pv1BoYo7.js";import{C as R,a as I}from"./CRow-CCKjXgEG.js";import{C as M,a as L}from"./CCardBody-Da11kLgp.js";import{C as U}from"./CForm-CW-aKSWy.js";import{C as N}from"./CAlert-D4i-n8OW.js";import{C as c,a as m,b as l}from"./CInputGroupText-DF-LoAY-.js";import{c as k}from"./cil-user-Ddrdy7PS.js";import{c as B}from"./cil-envelope-open-DZEb6fPK.js";import{c as y}from"./cil-lock-locked-DmxpJbVL.js";import{a as D}from"./CButton-rOzXJk2W.js";import"./CCloseButton-RnxG4z8J.js";import"./Transition-BVVki2E3.js";const X=()=>{const[d,h]=o.useState(""),[p,j]=o.useState(""),[t,f]=o.useState(""),[u,g]=o.useState(""),[w,x]=o.useState(""),[v,r]=o.useState(""),n=C=>{const{name:a,value:s}=C.target;r(""),x(""),a==="name"&&h(s),a==="email"&&j(s),a==="password"&&f(s),a==="repeatPassword"&&g(s)},E=async C=>{var a;if(C.preventDefault(),r(""),x(""),!d.trim()||!p.trim()||!t.trim()||!u.trim()){r("Por favor, completa todos los campos.");return}if(t!==u){r("Las contraseñas no coinciden.");return}try{const s=await S.post("/api/register",{name:d,email:p,password:t,tipo_usuario:"EST"});x("Usuario registrado. Por favor, verifica tu correo."),h(""),j(""),f(""),g("")}catch(s){if(s.response){const b=((a=s.response.data)==null?void 0:a.detail)||"Error desconocido";s.response.status===400?r(`Error: ${b}`):r(`Error del servidor: ${b}`)}else r("Error de red. Por favor, verifica tu conexión.")}};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(P,{children:e.jsx(R,{className:"justify-content-center",children:e.jsx(I,{md:9,lg:7,xl:6,children:e.jsx(M,{className:"mx-4",children:e.jsx(L,{className:"p-4",children:e.jsxs(U,{onSubmit:E,children:[e.jsx("h1",{children:"Registro"}),e.jsx("p",{className:"text-body-secondary",children:"Cree su cuenta de usuario"}),w&&e.jsx(N,{color:"success",className:"mb-3",children:w}),v&&e.jsx(N,{color:"danger",className:"mb-3",children:v}),e.jsxs(c,{className:"mb-3",children:[e.jsx(m,{children:e.jsx(i,{icon:k})}),e.jsx(l,{placeholder:"Nombre de Usuario",autoComplete:"username",name:"name",value:d,onChange:n})]}),e.jsxs(c,{className:"mb-3",children:[e.jsx(m,{children:e.jsx(i,{icon:B})}),e.jsx(l,{type:"emil",placeholder:"Correo electrónico",autoComplete:"email",name:"email",value:p,onChange:n})]}),e.jsxs(c,{className:"mb-3",children:[e.jsx(m,{children:e.jsx(i,{icon:y})}),e.jsx(l,{type:"password",placeholder:"Contraseña",autoComplete:"new-password",name:"password",value:t,onChange:n})]}),e.jsxs(c,{className:"mb-4",children:[e.jsx(m,{children:e.jsx(i,{icon:y})}),e.jsx(l,{type:"password",placeholder:"Repetir contraseña",autoComplete:"new-password",name:"repeatPassword",value:u,onChange:n})]}),e.jsx("div",{className:"d-grid",children:e.jsx(D,{color:"success",type:"submit",children:"Crear cuenta"})})]})})})})})})})};export{X as default};
